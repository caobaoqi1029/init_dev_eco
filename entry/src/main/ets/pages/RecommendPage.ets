import { recommendListType, recommendListTypeModel } from '../model/Music'
import { dailyRecommend, recommendList, swiperList } from '../model/MusicConstants'
// @ts-ignore
import { recommendDailyType } from '../model/MusicConstants'

@Entry
@Component
export struct RecommendPage {
  @Builder
  searchBuilder() {
    Row() {
      Image($r('app.media.ic_search'))
        .width(25)
        .fillColor(Color.Gray)


      Text('åªå› ä½ å¤ªç¾ğŸ”¥')
        .fontColor(Color.Gray)
        .layoutWeight(1)

      Image($r('app.media.ic_code'))
        .width(25)
        .fillColor(Color.Gray)

    }
    .padding({ left: 12, right: 12 })
    .width('100%')
    .height(42)
    .backgroundColor('#ff292929')
    .borderRadius(60)
  }

  @Builder
  swiperBuilder() {
    Swiper() {
      ForEach(swiperList, (item: string) => {
        Image(item)
          .width('100%')
      })
    }
    .loop(true)
    .autoPlay(true)
    .interval(3000)
    .borderRadius(10)
    .indicatorStyle({
      selectedColor: Color.White
    })
  }

  @Builder
  titleBuilder(title: string, rightText: string) {
    Row() {
      Text(title)
        .fontColor(Color.White)
      Text(rightText)
        .fontColor(Color.Gray)
    }
    .width('100%')
    .justifyContent(FlexAlign.SpaceBetween)
  }

  @Builder
  recommendBuilder() {
    Scroll() {
      Row({ space: 10 }) {
        ForEach(dailyRecommend, (item: recommendDailyType) => {
          Column() {
            Text(item.type)
              .fontColor(Color.White)
              .fontWeight(800)
              .fontSize(16)
              .backgroundColor(item.top)
              .width('100%')
              .padding({ top: 10, bottom: 10 })

            Image(item.img)

            Text(item.title)
              .fontColor(Color.White)
              .backgroundColor(item.bottom)
              .fontSize(14)
              .padding({ top: 10, bottom: 10, left: 5, right: 5 })
              .maxLines(2) //è®¾ç½®æœ€å¤§æ˜¾ç¤ºè¡Œæ•°ä¸º2è¡Œ
              .textOverflow({ overflow: TextOverflow.Ellipsis }) //æ–‡å­—è¶…å‡º2è¡Œåˆ™ä½¿ç”¨...æ›¿ä»£
          }
          .height(120)
          .width('40%')
        })
      }
      .margin({ top: -100 }) //ç”¨æ¥ä¿®å¤Scrollè‡ªåŠ¨å°†é‡Œé¢çš„å†…å®¹å¾€ä¸‹ç•™ç™½çš„é—®é¢˜
      .height(120)
    }
    .height(240)
    .scrollable(ScrollDirection.Horizontal) //è®¾ç½®æ°´å¹³æ»šåŠ¨
  }

  @Builder
  musicBuider() {
    Scroll() {
      Row({space:10}) {
        ForEach(recommendList, (item: recommendListType) => {
          Column({ space: 10 }) {
            Stack({ alignContent: Alignment.TopStart }) {
              Image(item.img)
                .width('100%') // è¿™ä¸ªä¸èƒ½çœï¼Œå¦‚æœçœç•¥ä¼šå¯¼è‡´Scrollå‡ºé—®é¢˜

              Text(item.count)
                .fontColor(Color.White)
                .margin(10)
                .fontSize(12)
                .fontWeight(800)
            }

            Text(item.title)
              .fontColor(Color.White)
              .fontSize(12)
              .maxLines(2)
              .textOverflow({ overflow: TextOverflow.Ellipsis })
          }
          .width('30%')
        })
      }
    }
    .scrollable(ScrollDirection.Horizontal)
  }

  build() {
    Column({ space: 20 }) {
      //   1. æœç´¢åŒºåŸŸ
      this.searchBuilder()

      //   2. è½®æ’­å›¾
      this.swiperBuilder()

      //   3. æ¯æ—¥æ¨è
      this.titleBuilder('æ¯æ—¥æ¨è', 'æ›´å¤š...')
      // æ¯æ—¥æ¨èå†…å®¹æ˜¾ç¤º
      this.recommendBuilder()

      //   4. æ¨èæ­Œå•
      this.titleBuilder('æ¨èæ­Œå•', 'æ›´å¤š...')
      this.musicBuider()

    }
    .width('100%')
    .height('100%')
    .padding(10)
    .backgroundColor(Color.Black)
  }
}
