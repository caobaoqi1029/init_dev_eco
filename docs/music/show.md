# Ikun ‰∫ëÈü≥‰πê

| Â≠¶Âè∑     | ËÅåË¥£                                        |
| -------- | ------------------------------------------- |
| üêî ÊõπÂÆùÁê™ | ÁªÑÈïøÔºåË¥üË¥£È°πÁõÆÁÆ°ÁêÜ‰ªªÂä°ÂàÜÈÖçÔºåÈ°πÁõÆÊâìÂåÖ        |
| üé§ ÊõπËìì   | devÔºåË¥üË¥£Êé®ËçêÈ°µÈù¢ÁöÑ‰ª£Á†ÅÂÆûÁé∞ÔºåÊñáÊ°£Êí∞ÂÜôÁ≠âÂ∑•‰Ωú |
| üíÉ ÁéãÊñáÁÖß | devÔºåË¥üË¥£Âä®ÊÄÅÈ°µÈù¢ÁöÑ‰ª£Á†ÅÂÆûÁé∞                 |
| üó£Ô∏è Á®ãÊüÑÊÉ† | devÔºåË¥üË¥£ÂèëÁé∞È°µÈù¢‰ª£Á†ÅÂÆûÁé∞                   |
| üèÄ ÂÆãÊñáÊù∞ | Èü≥‰πêÊï∞ÊçÆÁöÑÊî∂ÈõÜ‰ª•Âèä PPT ÁöÑÂà∂‰Ωú               |

> [!TIP]
>
> È°πÁõÆ‰∫ÆÁÇπÔºö
>
> - ‰ΩøÁî® RDB Êìç‰ΩúÊï∞ÊçÆÂ∫ì
> - ‰æßÊªëÂà†Èô§ music „ÄÅËá™ÂÆö‰πâÊí≠ÊîæÊéß‰ª∂ ÔºàÂèØÁî®‰∫éÊéßÂà∂Ê≠åÊõ≤ÂâçËøõ | ÂêéÈÄÄÔºâ
> - ‰ΩøÁî® git ÂçèÂêåÂºÄÂèë„ÄÅÈÄöËøá vitePress Êí∞ÂÜôÊñáÊ°£Êõ¥ÂèãÂ•Ω

# ‰∏Ä„ÄÅÊï¥‰ΩìÁªìÊûÑ

> [!TIP]
>
> È°πÁõÆÂ§ßËá¥ÂàÜ‰∏∫‰ª•‰∏ãÂá†‰∏™È°µÈù¢Ôºö
>
> - Êé®ËçêÈ°µÈù¢ÔºöÂ±ïÁ§∫ÂàÜÁ±ª‰ø°ÊÅØ
> - ÂèëÁé∞È°µÈù¢ÔºöÁî®‰∫éÈöèÊú∫Èü≥‰πêÊé®Ëçê ÔºàRandom ÂæÖÂÆûÁé∞Ôºâ
> - Èü≥‰πêÈ°µÈù¢Ôºö‰∏ªË¶ÅÁî®‰∫éÂê¨Èü≥‰πê
> - Âä®ÊÄÅÈ°µÈù¢ÔºöÁî®‰∫éÂ±ïÁ§∫Áõ∏ÂÖ≥Ê≠åÊõ≤ÁöÑËØÑËÆ∫‰ª•ÂèäËΩ¨ÂèëÁÇπËµûÁ≠â‰ø°ÊÅØ

# ‰∫å„ÄÅÈ°µÈù¢

> üêî È∏°‰Ω†Â§™Áæé oh baby

## 2.1 Êé®ËçêÈ°µÈù¢

```ts
import { recommendListType, recommendListTypeModel } from '../model/Music'
import { dailyRecommend, recommendList, swiperList } from '../model/MusicConstants'
// @ts-ignore
import { recommendDailyType } from '../model/MusicConstants'

@Entry
@Component
export struct RecommendPage {
  @Builder
  searchBuilder() {
    Row() {
      Image($r('app.media.ic_search'))
        .width(25)
        .fillColor(Color.Gray)
      Text('Âè™Âõ†‰Ω†Â§™Áæéüî•')
        .fontColor(Color.Gray)
        .layoutWeight(1)
      Image($r('app.media.ic_code'))
        .width(25)
        .fillColor(Color.Gray)
    }
    .padding({ left: 12, right: 12 })
    .width('100%')
    .height(42)
    .backgroundColor('#ff292929')
    .borderRadius(60)
  }

  @Builder
  swiperBuilder() {
    Swiper() {
      ForEach(swiperList, (item: string) => {
        Image(item)
          .width('100%')
      })
    }
    .loop(true)
    .autoPlay(true)
    .interval(3000)
    .borderRadius(10)
    .indicatorStyle({
      selectedColor: Color.White
    })
  }

  @Builder
  titleBuilder(title: string, rightText: string) {
    Row() {
      Text(title)
        .fontColor(Color.White)
      Text(rightText)
        .fontColor(Color.Gray)
    }
    .width('100%')
    .justifyContent(FlexAlign.SpaceBetween)
  }

  @Builder
  recommendBuilder() {
    Scroll() {
      Row({ space: 10 }) {
        ForEach(dailyRecommend, (item: recommendDailyType) => {
          Column() {
            Text(item.type)
              .fontColor(Color.White)
              .fontWeight(800)
              .fontSize(16)
              .backgroundColor(item.top)
              .width('100%')
              .padding({ top: 10, bottom: 10 })

            Image(item.img)

            Text(item.title)
              .fontColor(Color.White)
              .backgroundColor(item.bottom)
              .fontSize(14)
              .padding({ top: 10, bottom: 10, left: 5, right: 5 })
              .maxLines(2) //ËÆæÁΩÆÊúÄÂ§ßÊòæÁ§∫Ë°åÊï∞‰∏∫2Ë°å
              .textOverflow({ overflow: TextOverflow.Ellipsis }) //ÊñáÂ≠óË∂ÖÂá∫2Ë°åÂàô‰ΩøÁî®...Êõø‰ª£
          }
          .height(120)
          .width('40%')
        })
      }
      .margin({ top: -100 }) //Áî®Êù•‰øÆÂ§çScrollËá™Âä®Â∞ÜÈáåÈù¢ÁöÑÂÜÖÂÆπÂæÄ‰∏ãÁïôÁôΩÁöÑÈóÆÈ¢ò
      .height(120)
    }
    .height(240)
    .scrollable(ScrollDirection.Horizontal) //ËÆæÁΩÆÊ∞¥Âπ≥ÊªöÂä®
  }

  @Builder
  musicBuider() {
    Scroll() {
      Row({space:10}) {
        ForEach(recommendList, (item: recommendListType) => {
          Column({ space: 10 }) {
            Stack({ alignContent: Alignment.TopStart }) {
              Image(item.img)
                .width('100%') // Ëøô‰∏™‰∏çËÉΩÁúÅÔºåÂ¶ÇÊûúÁúÅÁï•‰ºöÂØºËá¥ScrollÂá∫ÈóÆÈ¢ò

              Text(item.count)
                .fontColor(Color.White)
                .margin(10)
                .fontSize(12)
                .fontWeight(800)
            }

            Text(item.title)
              .fontColor(Color.White)
              .fontSize(12)
              .maxLines(2)
              .textOverflow({ overflow: TextOverflow.Ellipsis })
          }
          .width('30%')
        })
      }
    }
    .scrollable(ScrollDirection.Horizontal)
  }

  build() {
    Column({ space: 20 }) {
      //   1. ÊêúÁ¥¢Âå∫Âüü
      this.searchBuilder()
      //   2. ËΩÆÊí≠Âõæ
      this.swiperBuilder()
      //   3. ÊØèÊó•Êé®Ëçê
      this.titleBuilder('ÊØèÊó•Êé®Ëçê', 'Êõ¥Â§ö...')
      // ÊØèÊó•Êé®ËçêÂÜÖÂÆπÊòæÁ§∫
      this.recommendBuilder()
      //   4. Êé®ËçêÊ≠åÂçï
      this.titleBuilder('Êé®ËçêÊ≠åÂçï', 'Êõ¥Â§ö...')
      this.musicBuider()
    }
    .width('100%')
    .height('100%')
    .padding(10)
    .backgroundColor(Color.Black)
  }
}

```

`RecommendPage` ÊòØ‰∏Ä‰∏™Áî®‰∫éÂ±ïÁ§∫Èü≥‰πêÊé®ËçêÂÜÖÂÆπÁöÑÈ°µÈù¢ÁªÑ‰ª∂„ÄÇÂÆÉÂåÖÂê´‰∫ÜÊêúÁ¥¢Âå∫Âüü„ÄÅËΩÆÊí≠Âõæ„ÄÅÊØèÊó•Êé®ËçêÂíåÊé®ËçêÊ≠åÂçïÁ≠âÊ®°Âùó„ÄÇ

1. **ÊêúÁ¥¢Âå∫Âüü (`searchBuilder`)**
   - ‰ΩøÁî® `Row` Â∏ÉÂ±ÄÔºåÂåÖÂê´‰∏Ä‰∏™ÊêúÁ¥¢ÂõæÊ†á„ÄÅÊñáÊú¨Âíå‰∏Ä‰∏™‰∫åÁª¥Á†ÅÂõæÊ†á„ÄÇ
   - ËÆæÁΩÆËÉåÊôØÈ¢úËâ≤„ÄÅËæπÊ°ÜÂçäÂæÑÂíåÂÜÖËæπË∑ùÔºå‰ª•ÁæéÂåñÁïåÈù¢„ÄÇ
2. **ËΩÆÊí≠Âõæ (`swiperBuilder`)**
   - ‰ΩøÁî® `Swiper` ÁªÑ‰ª∂Âíå `ForEach` Âæ™ÁéØÊù•Â±ïÁ§∫Â§öÂº†ÂõæÁâá„ÄÇ
   - ËÆæÁΩÆËΩÆÊí≠ÂõæÁöÑËá™Âä®Êí≠Êîæ„ÄÅÂæ™ÁéØ„ÄÅÈó¥ÈöîÊó∂Èó¥ÂíåÊåáÁ§∫Âô®Ê†∑Âºè„ÄÇ
3. **ÊØèÊó•Êé®Ëçê (`titleBuilder` Âíå `recommendBuilder`)**
   - ‰ΩøÁî® `titleBuilder` ÊûÑÂª∫Ê†áÈ¢òÊ†èÔºåÊòæÁ§∫‚ÄúÊØèÊó•Êé®Ëçê‚ÄùÂíå‚ÄúÊõ¥Â§ö...‚Äù„ÄÇ
   - ‰ΩøÁî® `recommendBuilder` Â±ïÁ§∫ÊØèÊó•Êé®ËçêÁöÑÈü≥‰πêÂàóË°®ÔºåÊØèÈ°πÂåÖÂê´Á±ªÂûã„ÄÅÂõæÁâáÂíåÊ†áÈ¢ò„ÄÇ
   - ‰ΩøÁî® `Column` Âíå `Row` Â∏ÉÂ±ÄÔºå‰ª•Âèä `ForEach` Âæ™ÁéØÊù•Âä®ÊÄÅÁîüÊàêÂÜÖÂÆπ„ÄÇ
4. **Êé®ËçêÊ≠åÂçï (`titleBuilder` Âíå `musicBuider`)**
   - ÂÜçÊ¨°‰ΩøÁî® `titleBuilder` ÊûÑÂª∫Ê†áÈ¢òÊ†èÔºåÊòæÁ§∫‚ÄúÊé®ËçêÊ≠åÂçï‚ÄùÂíå‚ÄúÊõ¥Â§ö...‚Äù„ÄÇ
   - ‰ΩøÁî® `musicBuider` Â±ïÁ§∫Êé®ËçêÊ≠åÂçïÔºåÊØèÈ°πÂåÖÂê´ÂõæÁâá„ÄÅÊí≠ÊîæÊ¨°Êï∞ÂíåÊ†áÈ¢ò„ÄÇ
   - ‰ΩøÁî® `Stack` Â∏ÉÂ±ÄÊù•Âè†Âä†ÂõæÁâáÂíåÊí≠ÊîæÊ¨°Êï∞Ôºå‰ª•Âèä `Column` Âíå `Row` Â∏ÉÂ±ÄÊù•ÁªÑÁªáÂÜÖÂÆπ„ÄÇ

![image-20240607112315754](https://2024-cbq-1311841992.cos.ap-beijing.myqcloud.com/picgo/image-20240607112315754.png)

## 2.2 ÂèëÁé∞È°µÈù¢

> [!CAUTION]
>
> ÁùÄÈáçËÆ≤Ëß£ DB ÁöÑÂÆûÁé∞

```ts

import relationalStore from '@ohos.data.relationalStore';
import {SongTable} from '../model/SongTable'
export default class CommonConstants {
  static readonly RDB_TAG = '[Debug.Rdb]';
  static readonly STORE_CONFIG: relationalStore.StoreConfig = {
    name: 'database.db',
    securityLevel: relationalStore.SecurityLevel.S1
  };
  static readonly Song_Table:SongTable = {
    tableName: 'SongTable',
    sqlCreate: 'CREATE TABLE IF NOT EXISTS SongTable(id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT, ' +
    'author TEXT, src INTEGER,img TEXT,style TEXT)',
    columns: ['id', 'name', 'author', 'src','img','style']
  };

}

```

```ts
import relationalStore from '@ohos.data.relationalStore';
import Logger from '../utils/Logger'
import CommonConstants from './CommonConstants';


export default class Rdb{
  private rdbStore: relationalStore.RdbStore | null = null;
  private tableName: string;
  private sqlCreateTable: string;
  private columns: Array<string>;
  constructor(tableName: string, sqlCreateTable: string, columns: Array<string>) {
    this.tableName = tableName;
    this.sqlCreateTable = sqlCreateTable;
    this.columns = columns;
  }
  getRdbStore(callback: Function = () => {
  }) {
    if (!callback || typeof callback === 'undefined' || callback === undefined) {
      Logger.info(CommonConstants.RDB_TAG, 'getRdbStore() has no callback!');
      return;
    }
    if (this.rdbStore !== null) {
      Logger.info(CommonConstants.RDB_TAG, 'The rdbStore exists.');
      callback();
      return
    }
    let context: Context = getContext(this) as Context;
    relationalStore.getRdbStore(context, CommonConstants.STORE_CONFIG, (err, rdb) => {
      if (err) {
        Logger.error(CommonConstants.RDB_TAG, `gerRdbStore() failed, err: ${err}`);
        return;
      }
      this.rdbStore = rdb;
      this.rdbStore.executeSql(this.sqlCreateTable);
      Logger.info(CommonConstants.RDB_TAG, 'getRdbStore() finished.');
      callback();
    });
  }

  insertData(data: relationalStore.ValuesBucket, callback: Function = () => {
  }) {
    if (!callback || typeof callback === 'undefined' || callback === undefined) {
      Logger.info(CommonConstants.RDB_TAG, 'insertData() has no callback!');
      return;
    }
    let resFlag: boolean = false;
    const valueBucket: relationalStore.ValuesBucket = data;
    if (this.rdbStore) {
      this.rdbStore.insert(this.tableName, valueBucket, (err, ret) => {
        if (err) {
          Logger.info(CommonConstants.RDB_TAG,`this is joker${JSON.stringify(valueBucket)}`)
          Logger.error(CommonConstants.RDB_TAG, `insertData() failed, err: ${err}  ${this.tableName}`);
          callback(resFlag);
          return;
        }
        Logger.info(CommonConstants.RDB_TAG, `insertData() finished: ${ret}`);
        callback(ret);
      });
    }
  }

  deleteData(predicates: relationalStore.RdbPredicates, callback: Function = () => {
  }) {
    if (!callback || typeof callback === 'undefined' || callback === undefined) {
      Logger.info(CommonConstants.RDB_TAG, 'deleteData() has no callback!');
      return;
    }
    let resFlag: boolean = false;
    if (this.rdbStore) {
      this.rdbStore.delete(predicates, (err, ret) => {
        if (err) {
          Logger.error(CommonConstants.RDB_TAG, `deleteData() failed, err: ${err}`);
          callback(resFlag);
          return;
        }
        Logger.info(CommonConstants.RDB_TAG, `deleteData() finished: ${ret}`);
        callback(!resFlag);
      });
    }
  }

  updateData(predicates: relationalStore.RdbPredicates, data: relationalStore.ValuesBucket, callback: Function = () => {
  }) {
    if (!callback || typeof callback === 'undefined' || callback === undefined) {
      Logger.info(CommonConstants.RDB_TAG, 'updateDate() has no callback!');
      return;
    }
    let resFlag: boolean = false;
    const valueBucket: relationalStore.ValuesBucket = data;
    if (this.rdbStore) {
      this.rdbStore.update(valueBucket, predicates, (err, ret) => {
        if (err) {
          Logger.error(CommonConstants.RDB_TAG, `updateData() failed, err: ${err}`);
          callback(resFlag);
          return;
        }
        Logger.info(CommonConstants.RDB_TAG, `updateData() finished: ${ret}`);
        callback(!resFlag);
      });
    }
  }

  query(predicates: relationalStore.RdbPredicates, callback: Function = () => {
  }) {
    if (!callback || typeof callback === 'undefined' || callback === undefined) {
      Logger.info(CommonConstants.RDB_TAG, 'query() has no callback!');
      return;
    }
    if (this.rdbStore) {
      this.rdbStore.query(predicates, this.columns, (err, resultSet) => {
        if (err) {
          Logger.error(CommonConstants.RDB_TAG, `query() failed, err:  ${err}`);
          return;
        }
        Logger.info(CommonConstants.RDB_TAG, 'query() finished.');
        callback(resultSet);
        resultSet.close();
      });
    }
  }
}


```

```ts
import relationalStore from '@ohos.data.relationalStore';
import Song from '../model/Song';
import CommonConstants from './CommonConstants';
import Rdb from './Rdb';

export default class SongTable {
  private songTable = new Rdb(CommonConstants.Song_Table.tableName,
    CommonConstants.Song_Table.sqlCreate, CommonConstants.Song_Table.columns)

  constructor(callback: Function = () => {
  }) {
    this.songTable.getRdbStore(callback);
  }

  getRdbStore(callback: Function = () => {
  }) {
    this.songTable.getRdbStore(callback);
  }

  /**
   * ÂàùÂßãÂåñÊï∞ÊçÆ
   * @param songs
   * @param callback
   */
  initData(songs: Array<Song>, callback: Function) {
    for (let i = 0; i < songs.length; i++) {
      this.insertData(songs[i], () => {
      });
    }
    callback(1);
  }

  /**
   * ÊèíÂÖ•Êï∞ÊçÆ
   * @param song song
   * @param callback callback
   */
  insertData(song: Song, callback: Function) {
    const valueBucket: relationalStore.ValuesBucket = generateBucket(song);
    this.songTable.insertData(valueBucket, callback);
  }

  /**
   * Âà†Èô§Êï∞ÊçÆ
   * @param song
   * @param callback
   */
  deleteData(song: Song, callback: Function) {
    let predicates = new relationalStore.RdbPredicates(CommonConstants.Song_Table.tableName);
    predicates.equalTo('id', song.id);
    this.songTable.deleteData(predicates, callback);
  }

  /**
   * Êõ¥Êñ∞Êï∞ÊçÆ
   * @param song
   * @param callback
   */
  updateData(song: Song, callback: Function) {
    const valueBucket: relationalStore.ValuesBucket = generateBucket(song);
    let predicates = new relationalStore.RdbPredicates(CommonConstants.Song_Table.tableName);
    predicates.equalTo('id', song.id);
    this.songTable.updateData(predicates, valueBucket, callback);
  }

  /**
   * select *
   * @param op op
   * @param callback callback
   */
  queryAllData(op: number, callback: Function) {
    let predicates = new relationalStore.RdbPredicates(CommonConstants.Song_Table.tableName)
    this.songTable.query(predicates, (result: relationalStore.ResultSet) => {
      let count = result.rowCount;
      console.log('count of result:' + count);
      if (count == 0 || typeof count == 'string') {
        console.log('query no result');
      }
      else {
        let res: Array<Song> = [];
        result.goToFirstRow();
        for (let i = 0;i < count; i++) {
          let tmp: Song = {
            id: 0,
            name: '',
            author: '',
            src: '',
            img: '',
          }
          tmp.id = result.getDouble(result.getColumnIndex('id'));
          tmp.name = result.getString(result.getColumnIndex('name'));
          tmp.author = result.getString(result.getColumnIndex('author'));
          tmp.src = result.getString(result.getColumnIndex('src'));
          tmp.img = result.getString(result.getColumnIndex('img'));
          res.push(tmp);
          result.goToNextRow();
        }
        callback(res);
      }

    })
  }
}

function generateBucket(song: Song): relationalStore.ValuesBucket {
  let obj: relationalStore.ValuesBucket = {};
  obj.id = song.id;
  obj.name = song.name;
  obj.author = song.author;
  obj.src = song.src;
  obj.img = song.img;
  return obj;
}
```

Âú® IndexPage Âä†ËΩΩÁöÑÊó∂ÂÄôÂàùÂßãÂåñ DB Êï∞ÊçÆ
```ts
  aboutToAppear(){
    this.SongTable.getRdbStore(()=>{
      this.SongTable.initData(this.allList,(res:number)=>{
        console.log('init song table count is: ' + res)
      })
    })
  }
```

`FindPage` ÊòØ‰∏Ä‰∏™Áî®‰∫éÂ±ïÁ§∫Èü≥‰πêÂàóË°®Âπ∂Êèê‰æõÊí≠ÊîæÂäüËÉΩÁöÑÈ°µÈù¢ÁªÑ‰ª∂„ÄÇÂÆÉÈÄöËøá‰∏éÊï∞ÊçÆÂ∫ì‰∫§‰∫íËé∑ÂèñÈü≥‰πêÂàóË°®ÔºåÂπ∂‰ΩøÁî® `AvPlayerManager` Êù•ÊéßÂà∂Èü≥‰πêÁöÑÊí≠ÊîæÂíåÊöÇÂÅú„ÄÇ

1. **ÂàùÂßãÂåñ (`aboutToAppear`)**
   - ‰ªéÊï∞ÊçÆÂ∫ì‰∏≠Ëé∑ÂèñÈü≥‰πêÂàóË°®„ÄÇ
   - ÂàùÂßãÂåñ `AvPlayerManager`ÔºåÂπ∂ÁõëÂê¨Èü≥‰πêÊí≠ÊîæÁöÑÊó∂ÈïøÂíåÊÄªÊó∂Èïø„ÄÇ
2. **Èü≥‰πêÂàóË°® (`maybeLikeListBuilder`)**
   - ‰ΩøÁî® `List` Âíå `ListItem` ÁªÑ‰ª∂Â±ïÁ§∫Èü≥‰πêÂàóË°®„ÄÇ
   - ÊØè‰∏™ÂàóË°®È°πÂåÖÂê´Èü≥‰πêÂ∞ÅÈù¢„ÄÅÈü≥‰πêÂêçÁß∞„ÄÅ‰ΩúËÄÖÂíåÊí≠Êîæ/ÊöÇÂÅúÊåâÈíÆ„ÄÇ
   - Ê†πÊçÆÂΩìÂâçÊí≠ÊîæÁä∂ÊÄÅÊòæÁ§∫‰∏çÂêåÁöÑÊí≠ÊîæÊåâÈíÆÔºàÊí≠ÊîæÊàñÊöÇÂÅúÔºâ„ÄÇ
   - ÊîØÊåÅ‰æßÊªëÊìç‰ΩúÔºå‰æßÊªëÂêéÂèØ‰ª•Âà†Èô§Èü≥‰πê„ÄÇ
3. **Êí≠ÊîæÊéßÂà∂**
   - ÈÄöËøáÁÇπÂáªÊí≠ÊîæÊåâÈíÆËß¶ÂèëÈü≥‰πêÊí≠ÊîæÔºåÂπ∂Êõ¥Êñ∞ÂΩìÂâçÊí≠ÊîæÁöÑÈü≥‰πêÂíåÁ¥¢Âºï„ÄÇ
   - Êèê‰æõÊöÇÂÅúÂäüËÉΩÔºåÈÄöËøáÁÇπÂáªÊöÇÂÅúÊåâÈíÆÊöÇÂÅúÂΩìÂâçÊí≠ÊîæÁöÑÈü≥‰πê„ÄÇ
4. **Áä∂ÊÄÅÁÆ°ÁêÜ**
   - ‰ΩøÁî® `@State` Ë£ÖÈ•∞Âô®ÁÆ°ÁêÜÊí≠ÊîæÁä∂ÊÄÅ (`isPlaying`)„ÄÅÂΩìÂâçÊí≠ÊîæÁ¥¢Âºï (`currentIndex`)„ÄÅÂΩìÂâçÊí≠ÊîæÈü≥‰πê (`currentMusic`)„ÄÅÊÄªÊó∂Èïø (`totalTime`) ÂíåÂΩìÂâçÊí≠ÊîæÊó∂Èïø (`currentTime`)„ÄÇ

> [!NOTE]
>
> ÂÖ≥ÈîÆÁâπÊÄßÔºö
>
> - **Âä®ÊÄÅÂÜÖÂÆπÁîüÊàê**Ôºö‰ΩøÁî® `ForEach` Âæ™ÁéØ‰ªéÊï∞ÊçÆÂ∫ì‰∏≠Âä®ÊÄÅÁîüÊàêÈü≥‰πêÂàóË°®„ÄÇ
> - **‰∫§‰∫íÊÄß**ÔºöÊèê‰æõÊí≠Êîæ„ÄÅÊöÇÂÅúÂíåÂà†Èô§Èü≥‰πêÁöÑÂäüËÉΩ„ÄÇ
> - **Áä∂ÊÄÅÂêåÊ≠•**ÔºöÂÆûÊó∂Êõ¥Êñ∞Êí≠ÊîæÁä∂ÊÄÅÂíåÊí≠ÊîæÊó∂ÈïøÔºåÁ°Æ‰øùÁî®Êà∑ÁïåÈù¢‰∏éÈü≥‰πêÊí≠ÊîæÁä∂ÊÄÅÂêåÊ≠•„ÄÇ

![image-20240607112420953](https://2024-cbq-1311841992.cos.ap-beijing.myqcloud.com/picgo/image-20240607112420953.png)

> [!CAUTION]
>
> - ‰ΩøÁî® RDB Â≠òÂÇ®Êìç‰ΩúÊï∞ÊçÆ
> - ‰æßÊªëÂà†Èô§

## 2.3 Èü≥‰πêÈ°µÈù¢

`MusicPage` ÊòØ‰∏Ä‰∏™Áî®‰∫éÂ±ïÁ§∫Èü≥‰πêÊí≠ÊîæÂàóË°®ÂíåÊéßÂà∂Èü≥‰πêÊí≠ÊîæÁöÑÈ°µÈù¢ÁªÑ‰ª∂„ÄÇÂÆÉÊèê‰æõ‰∫ÜÈü≥‰πêÂàóË°®ÁöÑÂ±ïÁ§∫„ÄÅÈü≥‰πêÊí≠ÊîæÊéßÂà∂„ÄÅÊí≠ÊîæËøõÂ∫¶ÊòæÁ§∫‰ª•ÂèäÊí≠ÊîæÂàóË°®ÁöÑÂàáÊç¢ÂäüËÉΩ„ÄÇ

1. **ÂàùÂßãÂåñ (`aboutToAppear`)**
   - ÂàùÂßãÂåñ `AvPlayerManager`ÔºåÂπ∂ÁõëÂê¨Èü≥‰πêÊí≠ÊîæÁöÑÊó∂ÈïøÂíåÊÄªÊó∂Èïø„ÄÇ
2. **Èü≥‰πêÊí≠ÊîæÊéßÂà∂ (`MusicPlayBuilder`)**
   - ÊòæÁ§∫ÂΩìÂâçÊí≠ÊîæÁöÑÈü≥‰πêÂêçÁß∞Âíå‰ΩúËÄÖ„ÄÇ
   - ‰ΩøÁî® `Image` ÁªÑ‰ª∂Â±ïÁ§∫Âî±ÁâáÂ∞ÅÈù¢ÔºåÂπ∂Ê∑ªÂä†ÊóãËΩ¨Âä®Áîª„ÄÇ
   - ‰ΩøÁî® `Slider` ÁªÑ‰ª∂ÊòæÁ§∫ÂíåÊéßÂà∂Êí≠ÊîæËøõÂ∫¶ÔºåÊîØÊåÅÁî®Êà∑ÊãñÂä®ÊªëÂùóË∞ÉÊï¥Êí≠Êîæ‰ΩçÁΩÆ„ÄÇ
3. **Èü≥‰πêÂàóË°® (`musicListBuilder`)**
   - ‰ΩøÁî® `List` Âíå `ListItem` ÁªÑ‰ª∂Â±ïÁ§∫Èü≥‰πêÂàóË°®„ÄÇ
   - ÊØè‰∏™ÂàóË°®È°πÂåÖÂê´Èü≥‰πêÂ∞ÅÈù¢„ÄÅÈü≥‰πêÂêçÁß∞„ÄÅ‰ΩúËÄÖÂíåÊí≠Êîæ/ÊöÇÂÅúÊåâÈíÆ„ÄÇ
   - Ê†πÊçÆÂΩìÂâçÊí≠ÊîæÁä∂ÊÄÅÊòæÁ§∫‰∏çÂêåÁöÑÊí≠ÊîæÊåâÈíÆÔºàÊí≠ÊîæÊàñÊöÇÂÅúÔºâ„ÄÇ
   - ÊîØÊåÅ‰æßÊªëÊìç‰ΩúÔºå‰æßÊªëÂêéÂèØ‰ª•Âà†Èô§Èü≥‰πê„ÄÇ
4. **Êí≠ÊîæÂàóË°®ÂàáÊç¢**
   - Êèê‰æõÂ∑¶Âè≥ÂàáÊç¢ÊåâÈíÆÔºåÂÖÅËÆ∏Áî®Êà∑ÂàáÊç¢Âà∞‰∏ä‰∏ÄÈ¶ñÊàñ‰∏ã‰∏ÄÈ¶ñÈü≥‰πê„ÄÇ

> [!NOTE] 
>
> ÂÖ≥ÈîÆÁâπÊÄßÔºö
>
> - **Âä®ÊÄÅÂÜÖÂÆπÁîüÊàê**Ôºö‰ΩøÁî® `ForEach` Âæ™ÁéØ‰ªéÈü≥‰πêÂàóË°®‰∏≠Âä®ÊÄÅÁîüÊàêÈü≥‰πêÂàóË°®È°π„ÄÇ
> - **‰∫§‰∫íÊÄß**ÔºöÊèê‰æõÊí≠Êîæ„ÄÅÊöÇÂÅú„ÄÅÂàáÊç¢Èü≥‰πêÂíåÂà†Èô§Èü≥‰πêÁöÑÂäüËÉΩ„ÄÇ
> - **Áä∂ÊÄÅÂêåÊ≠•**ÔºöÂÆûÊó∂Êõ¥Êñ∞Êí≠ÊîæÁä∂ÊÄÅ„ÄÅÊí≠ÊîæÊó∂ÈïøÂíåÊí≠ÊîæÂàóË°®ÔºåÁ°Æ‰øùÁî®Êà∑ÁïåÈù¢‰∏éÈü≥‰πêÊí≠ÊîæÁä∂ÊÄÅÂêåÊ≠•„ÄÇ

![image-20240607112559515](https://2024-cbq-1311841992.cos.ap-beijing.myqcloud.com/picgo/image-20240607112559515.png)

> [!CAUTION]
>
> - Ëá™ÂÆö‰πâÊí≠ÊîæÊéß‰ª∂
> - ÂÆûÊó∂Ê∏≤ÊüìÂΩìÂâçÊí≠ÊîæÈü≥‰πê‰ø°ÊÅØ

## 2.4 Âä®ÊÄÅÈ°µÈù¢

`MomentPage` ÊòØ‰∏Ä‰∏™Áî®‰∫éÂ±ïÁ§∫Èü≥‰πê‰∫íÂä®ÂπøÂú∫ÁöÑÈ°µÈù¢ÁªÑ‰ª∂„ÄÇÂÆÉÈÄöËøáÂ±ïÁ§∫Áî®Êà∑Âä®ÊÄÅÂíåÁõ∏ÂÖ≥Èü≥‰πêÔºåÊèê‰æõ‰∫Ü‰∏Ä‰∏™Á§æ‰∫§‰∫íÂä®ÁöÑÂπ≥Âè∞„ÄÇÁî®Êà∑ÂèØ‰ª•ÊµèËßàÂä®ÊÄÅ„ÄÅÊí≠ÊîæÈü≥‰πê„ÄÅÂàÜ‰∫´ÂíåËØÑËÆ∫„ÄÇ

1. **Èü≥‰πêÊí≠ÊîæÊéßÂà∂ (`playerCardBuilder`)**
   - Âú®ÊØè‰∏™Âä®ÊÄÅÈ°π‰∏≠ÂµåÂÖ•Èü≥‰πêÊí≠ÊîæÊéßÂà∂Âç°ÔºåÊòæÁ§∫Èü≥‰πêÂ∞ÅÈù¢„ÄÅÂêçÁß∞Âíå‰ΩúËÄÖ„ÄÇ
   - Ê†πÊçÆÂΩìÂâçÊí≠ÊîæÁä∂ÊÄÅÊòæÁ§∫‰∏çÂêåÁöÑÊí≠ÊîæÊåâÈíÆÔºàÊí≠ÊîæÊàñÊöÇÂÅúÔºâ„ÄÇ
2. **Âä®ÊÄÅÂàóË°® (`musicListBuilder`)**
   - ‰ΩøÁî® `List` Âíå `ListItem` ÁªÑ‰ª∂Â±ïÁ§∫Âä®ÊÄÅÂàóË°®„ÄÇ
   - ÊØè‰∏™Âä®ÊÄÅÈ°πÂåÖÂê´Áî®Êà∑Â§¥ÂÉè„ÄÅ‰ΩúËÄÖ„ÄÅÂÜÖÂÆπ„ÄÅÈü≥‰πêÊí≠ÊîæÂç°‰ª•ÂèäÂàÜ‰∫´„ÄÅËØÑËÆ∫ÂíåÁÇπËµûÁöÑÁªüËÆ°‰ø°ÊÅØ„ÄÇ
   - ‰ΩøÁî® `ForEach` Âæ™ÁéØ‰ªéÂä®ÊÄÅÂàóË°®‰∏≠Âä®ÊÄÅÁîüÊàêÂä®ÊÄÅÈ°π„ÄÇ

> [!NOTE]
>
> ÂÖ≥ÈîÆÁâπÊÄßÔºö
>
> - **Âä®ÊÄÅÂÜÖÂÆπÁîüÊàê**Ôºö‰ΩøÁî® `ForEach` Âæ™ÁéØ‰ªéÂä®ÊÄÅÂàóË°®‰∏≠Âä®ÊÄÅÁîüÊàêÂä®ÊÄÅÈ°π„ÄÇ
> - **‰∫§‰∫íÊÄß**ÔºöÊèê‰æõÊí≠ÊîæÈü≥‰πêÁöÑÂäüËÉΩÔºåÂπ∂Ê†πÊçÆÂΩìÂâçÊí≠ÊîæÁä∂ÊÄÅÊòæÁ§∫‰∏çÂêåÁöÑÊí≠ÊîæÊåâÈíÆ„ÄÇ
> - **Á§æ‰∫§‰∫íÂä®**ÔºöÂ±ïÁ§∫Âä®ÊÄÅÁöÑÂàÜ‰∫´„ÄÅËØÑËÆ∫ÂíåÁÇπËµûÁªüËÆ°ÔºåÂ¢ûÂº∫Áî®Êà∑‰πãÈó¥ÁöÑ‰∫íÂä®„ÄÇ

![image-20240607112740220](https://2024-cbq-1311841992.cos.ap-beijing.myqcloud.com/picgo/image-20240607112740220.png)
